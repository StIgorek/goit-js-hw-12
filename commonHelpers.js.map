{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/js/error-msg-functions.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionPosition: \"bottom\",\n        captionsData: \"alt\",\n});\n\nconst refs = {\n    searchForm: document.querySelector(\".js-search-form\"),\n    gallery: document.querySelector(\".js-gallery\"),\n    loader: document.querySelector(\".js-loader\"),\n    loadMoreBtn: document.querySelector(\".js-load-more-button\"),\n};\n\nfunction showLoader() {\n    refs.loader.classList.remove(\"is-hidden\");\n    refs.loader.classList.add(\"loader\");\n}\nfunction hideLoader() {\n    refs.loader.classList.add(\"is-hidden\");\n    refs.loader.classList.remove(\"loader\");\n}\nfunction showButton() {\n    refs.loadMoreBtn.classList.remove(\"is-hidden\");\n}\nfunction hideButton() {\n    refs.loadMoreBtn.classList.add(\"is-hidden\");\n}\n\nfunction renderPictures(hits) {\n    return hits.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n    <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\" \n            alt=\"${tags}\" \n            width=\"360\"\n            height=\"152\" \n          />\n        </a>\n        <div class=\"discribe-box\">\n          <ul class=\"discribe-list\">\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Likes</h2>\n              <p class=\"discribe-text\">${likes}</p>\n            </li>\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Views</h2>\n              <p class=\"discribe-text\">${views}</p>\n            </li>\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Comments</h2>\n              <p class=\"discribe-text\">${comments}</p>\n            </li>\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Downloads</h2>\n              <p class=\"discribe-text\">${downloads}</p>\n            </li>\n          </ul>\n        </div>\n      </li>\n    `).join(\"\");\n}\n\nfunction scrollGalerryCard() {\n    const galleryCardHeight = document\n        .querySelector(\".gallery-card\")\n        .getBoundingClientRect().height;\n    \n    window.scrollBy({\n        top: Math.ceil(galleryCardHeight *2),\n        left: Math.ceil(galleryCardHeight *2),\n        behavior: \"smooth\",\n    });\n}\n\n// -------- EXPORT --------------//\nexport { lightbox, refs, showLoader, hideLoader, showButton, hideButton, renderPictures, scrollGalerryCard }","import axios from \"axios\";\n\n//const BASE_URL = \"https://pixabay.com\";\n//const ENDPOINT = \"api\";\n//axios.defaults.baseURL = BASE_URL;\n\nconst searchParams = {\n    key: \"44853639-2309de7343cad235f23b575f4\",\n    q: \"\",\n    imageType: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page: 1,\n    per_page: 15,\n    maxPage: 0,\n};\n\nasync function getPictures() {\n    const response = await axios.get(\"https://pixabay.com/api/\", {params: searchParams});\n        return response.data;\n}\n\n// -------- EXPORT --------------//\nexport { getPictures, searchParams }\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nfunction noImagesError() {\n  iziToast.error({\n      title: \"Error\",\n      message: \"Sorry, there are no images matching your search query. Please try again!\",\n      position: \"center\",\n  });\n}\n\nfunction noRequestError() {\n  iziToast.warning({\n      title: \"Caution\",\n      message: \"Please write your request in the input field!\",\n      position: \"topRight\",\n  });\n}\n\nfunction endSearchMessage() {\n  iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: \"center\",\n  });\n}\n\n// -------- EXPORT --------------//\nexport { noImagesError, noRequestError, endSearchMessage }","import { lightbox, refs, showLoader, hideLoader, showButton, hideButton, renderPictures, scrollGalerryCard  } from \"./js/render-functions\";\nimport { searchParams, getPictures } from \"./js/pixabay-api\";\nimport { noImagesError, noRequestError, endSearchMessage } from \"./js/error-msg-functions\";\n\nrefs.searchForm.addEventListener(\"submit\", handlerSearch);\n\nasync function handlerSearch(event) {\n    event.preventDefault();\n\n    refs.gallery.innerHTML = \"\";\n    \n    const form = event.currentTarget;\n    searchParams.q = form.elements.searchtext.value.toLowerCase().trim();\n\n    if (!searchParams.q) {\n        noRequestError();\n        //hideButton();\n        return;\n    }\n\n    showLoader();\n\n    try {\n        const { totalHits, hits } = await getPictures();\n\n        hideLoader();\n        searchParams.maxPage = Math.ceil(totalHits / searchParams.per_page);\n        refs.gallery.insertAdjacentHTML(\"beforeend\", renderPictures(hits));\n        lightbox.refresh();\n\n        if (hits.length > 0 && hits.length !== totalHits) {\n            showButton();\n            refs.loadMoreBtn.addEventListener(\"click\", handlerLoadMore);\n        } else if (hits.length === 0) {\n            noImagesError();\n            hideButton();\n        }\n    } catch (error) {\n        noImagesError;\n    } finally {\n        refs.searchForm.reset();\n    }\n}\n\nasync function handlerLoadMore() {\n    searchParams.page += 1;\n    hideButton();\n    showLoader();\n\n    try {\n        const { hits } = await getPictures(); \n\n        showButton();\n        hideLoader();\n\n        refs.gallery.insertAdjacentHTML(\"beforeend\", renderPictures(hits));\n        lightbox.refresh();\n        scrollGalerryCard();\n\n        if (searchParams.page === searchParams.maxPage) {\n            hideButton();\n            endSearchMessage();\n            refs.loadMoreBtn.removeEventListener(\"click\", handlerLoadMore);\n        }\n        \n    } catch (error) {\n        noImagesError;\n    } finally {}\n}\n\n"],"names":["lightbox","SimpleLightbox","refs","showLoader","hideLoader","showButton","hideButton","renderPictures","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","scrollGalerryCard","galleryCardHeight","searchParams","getPictures","axios","noImagesError","iziToast","noRequestError","endSearchMessage","handlerSearch","event","form","totalHits","handlerLoadMore"],"mappings":"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"}